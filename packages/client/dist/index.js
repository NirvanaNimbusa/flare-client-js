!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["flare-client"]=t():e["flare-client"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var r,o,i;!function(a,u){"use strict";o=[n(1)],void 0===(i="function"==typeof(r=function(e){var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:o,fileName:i,lineNumber:r[1],columnNumber:r[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),o=r&&r[1]?r[1]:void 0,i=this.extractLocation(t.replace(n,""));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var u=n.exec(r[i]);u&&o.push(new e({fileName:u[2],lineNumber:u[1],source:r[i]}))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var u=n.exec(r[i]);u&&o.push(new e({functionName:u[3]||void 0,fileName:u[2],lineNumber:u[1],source:r[i]}))}return o},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var u=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:u,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)}}})?r.apply(t,o):r)||(e.exports=i)}()},function(e,t,n){var r,o,i;!function(n,a){"use strict";o=[],void 0===(i="function"==typeof(r=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],a=r.concat(o,i,["args"]);function u(e){if(e instanceof Object)for(var n=0;n<a.length;n++)e.hasOwnProperty(a[n])&&void 0!==e[a[n]]&&this["set"+t(a[n])](e[a[n]])}u.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof u)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var s=0;s<r.length;s++)u.prototype["get"+t(r[s])]=n(r[s]),u.prototype["set"+t(r[s])]=function(e){return function(t){this[e]=Boolean(t)}}(r[s]);for(var c=0;c<o.length;c++)u.prototype["get"+t(o[c])]=n(o[c]),u.prototype["set"+t(o[c])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[c]);for(var l=0;l<i.length;l++)u.prototype["get"+t(i[l])]=n(i[l]),u.prototype["set"+t(i[l])]=function(e){return function(t){this[e]=String(t)}}(i[l]);return u})?r.apply(t,o):r)||(e.exports=i)}()},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i={},a=1e3,u={codeSnippet:{0:"Could not read from file"},trimmedColumnNumber:null};function s(e,t,n){return new Promise((function(r){e&&t?function(e){return new Promise((function(t){var n=new XMLHttpRequest;i[e]?t(i[e]):(n.open("GET",e,!1),n.onreadystatechange=function(){if(4===n.readyState&&(200===n.status||0==n.status))return i[e]=n.responseText,void t(n.responseText);t(null)},n.send(null))}))}(e).then((function(e){r(e?function(e,t,n){for(var r={},o=null,i=e.split("\n"),u=-20;u<=20;u++){var s=t+u;if(s>=0&&i[s]){var c=s+1;if(i[s].length>a){if(n&&n+a/2>a){r[c]=i[s].substr(n-Math.round(a/2),a),c===t&&(o=Math.round(a/2));continue}r[c]=i[s].substr(0,a)+"â€¦";continue}r[c]=i[s]}}return{codeSnippet:r,trimmedColumnNumber:o}}(e,t,n):u)})):r(u)}))}var c="undefined"==typeof FLARE_GIT_INFO?{}:FLARE_GIT_INFO,l="1.0.0",f="undefined"==typeof FLARE_SOURCEMAP_VERSION?"":FLARE_SOURCEMAP_VERSION;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e){return new Promise((function(t,n){var r;(r=e)&&(r.stack||r.stacktrace||r["opera#sourceloc"])&&"string"==typeof(r.stack||r.stacktrace||r["opera#sourceloc"])&&r.stack!=="".concat(r.name,": ").concat(r.message)?Promise.all(o.a.parse(e).map((function(e){return new Promise((function(t){s(e.fileName,e.lineNumber,e.columnNumber).then((function(n){t({line_number:e.lineNumber||1,column_number:e.columnNumber||1,method:e.functionName||"Anonymous or unknown function",file:e.fileName||"Unknown file",code_snippet:n.codeSnippet,trimmed_column_number:n.trimmedColumnNumber,class:""})}))}))}))).then(t):n(void 0)}))}function h(){return Math.round(Date.now()/1e3)}function g(e){if(e.request={url:document.location.href,useragent:navigator.userAgent,referrer:document.referrer,readyState:document.readyState},document.cookie&&(e.cookies=document.cookie.split("; ").reduce((function(e,t){var n=m(t.split(/=/),2),r=n[0],o=n[1];return e[r]=o,e}),{})),location.search){var t={};new URLSearchParams(location.search).forEach((function(e,n){t[n]=e})),e.request_data={queryString:t}}return e.git=c,e}function v(e){var t=[],n=JSON.stringify(e,(function(e,n){if("object"===p(n)&&null!==n){if(-1!==t.indexOf(n))try{return JSON.parse(JSON.stringify(n))}catch(e){return}t.push(n)}return n}));return t=null,n}function y(e){console.error("Flare JS Client V".concat(l,": ").concat(e))}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key="",this.reportingUrl="",this.glows=[],this.reportedErrorsTimestamps=[],this.customContext={context:{}},this.config={maxGlows:30,maxReportsPerMinute:500}}var t,n,r;return t=e,(n=[{key:"setConfig",value:function(e){this.config=w({},this.config,{},e)}},{key:"light",value:function(e,t){e||y("No Flare key was passed, shutting down."),t||y("No reportingUrl was passed, shutting down."),this.key=e,this.reportingUrl=t}},{key:"glow",value:function(e){var t=e.name,n=e.messageLevel,r=void 0===n?"info":n,o=e.metaData,i=void 0===o?[]:o,a=e.time,u=void 0===a?Math.round(Date.now()/1e3):a;this.glows.push({microtime:u,time:u,name:t,message_level:r,meta_data:i}),this.glows.length>this.config.maxGlows&&(this.glows=this.glows.slice(this.glows.length-this.config.maxGlows))}},{key:"addContext",value:function(e,t){this.customContext.context[e]=t}},{key:"addContextGroup",value:function(e,t){this.customContext[e]=t}},{key:"reportError",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key&&this.reportingUrl||y("The client was not yet initialised with an API key.\n                Run client.light('api-token-goes-here') when you initialise your app.\n                If you are running in dev mode and didn't run the light command on purpose, you can ignore this error."),e||y("No error was provided, not reporting."),this.reportedErrorsTimestamps.length>=this.config.maxReportsPerMinute){var r=this.reportedErrorsTimestamps[this.reportedErrorsTimestamps.length-this.config.maxReportsPerMinute];if(r>Date.now()-6e4)return}d(e).then((function(r){r||y("No error stack was found, not reporting the error.");var o={key:t.key,notifier:"Flare JavaScript Client V"+l,exception_class:e.constructor?e.constructor.name:void 0,seen_at:h(),message:e.message,language:"javascript",glows:t.glows,context:g(w({},n,{},t.customContext)),stacktrace:r,sourcemap_version_id:f},i=new XMLHttpRequest;i.open("POST",t.reportingUrl),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("x-api-key",t.key),i.setRequestHeader("Access-Control-Request-Headers","Origin, X-Requested-With, Content-Type, Accept"),i.send(v(o)),t.reportedErrorsTimestamps.push(Date.now())}))}}])&&N(t.prototype,n),r&&N(t,r),e}())}])}));