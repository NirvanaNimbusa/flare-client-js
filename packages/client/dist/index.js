!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["flare-client"]=t():e["flare-client"]=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){var n,o,i;!function(a,u){"use strict";o=[r(1)],void 0===(i="function"==typeof(n=function(e){var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(r)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new e({functionName:o,fileName:i,lineNumber:n[1],columnNumber:n[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(t.replace(r,""));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,a=n.length;i<a;i+=2){var u=r.exec(n[i]);u&&o.push(new e({fileName:u[2],lineNumber:u[1],source:n[i]}))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,a=n.length;i<a;i+=2){var u=r.exec(n[i]);u&&o.push(new e({functionName:u[3]||void 0,fileName:u[2],lineNumber:u[1],source:n[i]}))}return o},parseOpera11:function(r){return r.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var u=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:a,args:u,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)}}})?n.apply(t,o):n)||(e.exports=i)}()},function(e,t,r){var n,o,i;!function(r,a){"use strict";o=[],void 0===(i="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}var n=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],a=n.concat(o,i,["args"]);function u(e){if(e instanceof Object)for(var r=0;r<a.length;r++)e.hasOwnProperty(a[r])&&void 0!==e[a[r]]&&this["set"+t(a[r])](e[a[r]])}u.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof u)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var s=0;s<n.length;s++)u.prototype["get"+t(n[s])]=r(n[s]),u.prototype["set"+t(n[s])]=function(e){return function(t){this[e]=Boolean(t)}}(n[s]);for(var c=0;c<o.length;c++)u.prototype["get"+t(o[c])]=r(o[c]),u.prototype["set"+t(o[c])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(o[c]);for(var l=0;l<i.length;l++)u.prototype["get"+t(i[l])]=r(i[l]),u.prototype["set"+t(i[l])]=function(e){return function(t){this[e]=String(t)}}(i[l]);return u})?n.apply(t,o):n)||(e.exports=i)}()},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i={},a=1e3,u={codeSnippet:{0:"Could not read from file"},trimmedColumnNumber:null};function s(e,t,r){return new Promise((function(n){e&&t?function(e){return new Promise((function(t){var r=new XMLHttpRequest;i[e]?t(i[e]):(r.open("GET",e,!1),r.onreadystatechange=function(){if(4===r.readyState&&(200===r.status||0==r.status))return i[e]=r.responseText,void t(r.responseText);t(null)},r.send(null))}))}(e).then((function(e){n(e?function(e,t,r){for(var n={},o=null,i=e.split("\n"),u=-20;u<=20;u++){var s=t+u;if(s>=0&&i[s]){var c=s+1;if(i[s].length>a){if(r&&r+a/2>a){n[c]=i[s].substr(r-Math.round(a/2),a),c===t&&(o=Math.round(a/2));continue}n[c]=i[s].substr(0,a)+"â€¦";continue}n[c]=i[s]}}return{codeSnippet:n,trimmedColumnNumber:o}}(e,t,r):u)})):n(u)}))}var c="undefined"==typeof FLARE_GIT_INFO?{}:FLARE_GIT_INFO,l="1.0.0",f="undefined"==typeof FLARE_SOURCEMAP_VERSION?"":FLARE_SOURCEMAP_VERSION;function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e){return new Promise((function(t,r){if(!(n=e)||!(n.stack||n.stacktrace||n["opera#sourceloc"])||"string"!=typeof(n.stack||n.stacktrace||n["opera#sourceloc"])||n.stack==="".concat(n.name,": ").concat(n.message))return r(void 0);var n;Promise.all(o.a.parse(e).map((function(e){return new Promise((function(t){s(e.fileName,e.lineNumber,e.columnNumber).then((function(r){t({line_number:e.lineNumber||1,column_number:e.columnNumber||1,method:e.functionName||"Anonymous or unknown function",file:e.fileName||"Unknown file",code_snippet:r.codeSnippet,trimmed_column_number:r.trimmedColumnNumber,class:""})}))}))}))).then(t)}))}function g(){return Math.round(Date.now()/1e3)}function v(e){if(e.request={url:document.location.href,useragent:navigator.userAgent,referrer:document.referrer,readyState:document.readyState},document.cookie&&(e.cookies=document.cookie.split("; ").reduce((function(e,t){var r=d(t.split(/=/),2),n=r[0],o=r[1];return e[n]=o,e}),{})),location.search){var t={};new URLSearchParams(location.search).forEach((function(e,r){t[r]=e})),e.request_data={queryString:t}}return e.git=c,e}function y(e){var t=[],r=JSON.stringify(e,(function(e,r){if("object"===m(r)&&null!==r){if(-1!==t.indexOf(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.push(r)}return r}));return t=null,r}function b(e){console.error("Flare JS Client V".concat(l,": ").concat(e))}function w(e,t){var r;return(r=Array.prototype).concat.apply(r,p(e.map(t)))}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key="",this.reportingUrl="",this.glows=[],this.reportedErrorsTimestamps=[],this.customContext={context:{}},this.beforeSubmit=void 0,this.solutionProviders=[],this.throttleConfig={maxGlows:30,maxReportsPerMinute:500}}var t,r,n;return t=e,(r=[{key:"setConfig",value:function(e){this.throttleConfig=S({},this.throttleConfig,{},e)}},{key:"light",value:function(e,t){e||b("No Flare key was passed, shutting down."),t||b("No reportingUrl was passed, shutting down."),Promise||b("ES6 Promises are not supported in this environment, shutting down."),this.key=e,this.reportingUrl=t}},{key:"glow",value:function(e){var t=e.name,r=e.messageLevel,n=void 0===r?"info":r,o=e.metaData,i=void 0===o?[]:o,a=e.time,u=void 0===a?Math.round(Date.now()/1e3):a;this.glows.push({microtime:u,time:u,name:t,message_level:n,meta_data:i}),this.glows.length>this.throttleConfig.maxGlows&&(this.glows=this.glows.slice(this.glows.length-this.throttleConfig.maxGlows))}},{key:"addContext",value:function(e,t){this.customContext.context[e]=t}},{key:"addContextGroup",value:function(e,t){this.customContext[e]=t}},{key:"registerSolutionProvider",value:function(e){if(!e.canSolve||!e.getSolutions)return b('A solution provider without a "canSolve" or "getSolutions" property was added.');this.solutionProviders.push(e)}},{key:"reportError",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key&&this.reportingUrl||b("The client was not yet initialised with an API key.\n                Run client.light('api-token-goes-here') when you initialise your app.\n                If you are running in dev mode and didn't run the light command on purpose, you can ignore this error."),e||b("No error was provided, not reporting."),this.reportedErrorsTimestamps.length>=this.throttleConfig.maxReportsPerMinute){var n=this.reportedErrorsTimestamps[this.reportedErrorsTimestamps.length-this.throttleConfig.maxReportsPerMinute];if(n>Date.now()-6e4)return}h(e).then((function(n){n||b("No error stack was found, not reporting the error.");var o={key:t.key,notifier:"Flare JavaScript Client V"+l,exception_class:e.constructor&&e.constructor.name?e.constructor.name:"undefined exception class",seen_at:g(),message:e.message,language:"javascript",glows:t.glows,context:v(S({},r,{},t.customContext)),stacktrace:n,sourcemap_version_id:f,solutions:w(t.solutionProviders,(function(t){return t.canSolve(e)?t.getSolutions(e):[]}))};if(t.beforeSubmit){var i=t.beforeSubmit(o);if(!i)return;o=i}var a=new XMLHttpRequest;a.open("POST",t.reportingUrl),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("x-api-key",t.key),a.setRequestHeader("Access-Control-Request-Headers","Origin, X-Requested-With, Content-Type, Accept"),a.send(y(o)),t.reportedErrorsTimestamps.push(Date.now())}))}}])&&x(t.prototype,r),n&&x(t,n),e}())}])}));